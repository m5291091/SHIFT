{% extends "admin/app_index.html" %}
{% load i18n %}

{% block content %}
<div id="content-main">
    {% if app_list %}
        {% for app in app_list %}
            {% if app.app_label == 'core' %}
                {% if app.models %}
                    {% for group in app_config.get_admin_model_groups %}
                        <div class="app-{{ app.app_label }} module">
                            <div class="module-body">
                                <h3 class="module-title">{{ group.name }}</h3>
                                <table summary="{% blocktrans with app.name as name %}Models available in the {{ name }} application.{% endblocktrans %}">
                                    {% for model in group.models %}
                                        {% with model_obj=app.models|get_item:model %}
                                            {% if model_obj %}
                                                <tr class="model-{{ model_obj.object_name|lower }}">
                                                    {% if model_obj.admin_url %}
                                                        <th scope="row"><a href="{{ model_obj.admin_url }}">{{ model_obj.name }}</a></th>
                                                    {% else %}
                                                        <th scope="row">{{ model_obj.name }}</th>
                                                    {% endif %}

                                                    {% if model_obj.add_url %}
                                                        <td><a href="{{ model_obj.add_url }}" class="addlink">{% translate 'Add' %}</a></td>
                                                    {% else %}
                                                        <td></td>
                                                    {% endif %}

                                                    {% if model_obj.admin_url %}
                                                        <td><a href="{{ model_obj.admin_url }}" class="changelink">{% translate 'Change' %}</a></td>
                                                    {% else %}
                                                        <td></td>
                                                    {% endif %}
                                                </tr>
                                            {% endif %}
                                        {% endwith %}
                                    {% endfor %}
                                </table>
                            </div>
                        </div>
                    {% endfor %}
                {% endif %}
            {% else %}
                {{ block.super }} {# Render other apps normally #}
            {% endif %}
        {% endfor %}
    {% else %}
        <p>{% translate "You don't have permission to view or edit anything." %}</p>
    {% endif %}
</div>
{% endblock %}

{% comment %} Helper to get item from dictionary in template {% endcomment %}
{% load django.template %}
{% if not app_config.get_admin_model_groups %}
    {% comment %} Fallback if get_admin_model_groups is not defined or empty {% endcomment %}
    {% block content %}{{ block.super }}{% endblock %}
{% endif %}